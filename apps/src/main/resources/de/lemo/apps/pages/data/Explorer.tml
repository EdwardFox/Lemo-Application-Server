<html t:type="layoutdashboard" title="LeMo | ${message:explorerTitle}"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
     
     <!-- Breadcrumb component-->
	<div class="row-fluid">
        <div class="span12">
    	<ul class="breadcrumb">
  			<li t:type="crumb/breadcrumbtrail" t:value="breadCrumb">
    			<a t:type="crumb/displaybreadcrumb" t:breadcrumb="breadCrumb" />
  			</li>
		</ul>
		</div>
	</div>
	
	<div class="row-fluid">
		<div class="span3">
			<div class="thumbnail">
    		
				<t:grid class="table" source="courses" model="coursesGridModel" row="course" rowsPerPage="5" t:inPlace="true">
		            <p:courseNameCell>
		            	<t:actionlink t:id="show" context="course.id" zone="coursezone">${course.courseDescription}</t:actionlink>		                
		            </p:courseNameCell>
		            <p:compareCell>
		            	<label class="checkbox">
		            	<form t:type="form">
						<!--	<t:actionlink t:id="compare" context="course.id"><input t:type="checkbox" value="false"/></t:actionlink>-->
							<input t:type="checkbox" value="false"/>
						</form>
						</label>
		            </p:compareCell>
		            <p:empty>
		              <p>${message:noCourses}</p>
		            </p:empty>
        		</t:grid>
        		<form class="form-search">
        		<div class="">
    				<input type="text" class="input-large search-query"/>
    				<button type="submit" class="btn pull-right">${message:search}</button>
    			</div>
    			</form>
    		</div>
    	</div>
    	
    	
    	
    	<div class="span9">
    		<div class="thumbnail">
    		<div class="row-fluid">
	    		<div class="span12">
	    		    <ul id="summaryTab" class="nav nav-tabs">
	    		    
					    <li class="active"><a href="#summary" data-toggle="tab">${message:courseSummary}</a></li>
					    <li><a href="#lastmonth" data-toggle="tab">Last month</a></li>
					    <li><a href="#overall" data-toggle="tab">Overall</a></li>
					    <li><a href="#settings" data-toggle="tab">Settings</a></li>
					</ul>
				</div>
			</div>
    		<div> <!-- well content  -->
    		
				<div class="tab-content">
				    <div class="tab-pane active" id="summary">
						<div class="row-fluid">
						<div class="span1" />
							
						<div class="span5">
							<t:zone t:id="courseZone" id="coursezone" t:update="show"> 	
							<section>
								<header>
									<h3>${CurrentCourse.courseDescription} (${CurrentCourse.courseId})</h3><br />
								</header>
								<p><b>${message:firstRequest}:</b> ${firstRequestDate} <br /> </p>
								<p><b>${message:lastRequest}:</b> ${lastRequestDate} <br /> </p>
								<p><b>${message:courseMaxParticipants}:</b> ${CurrentCourse.maxParticipants}<br />  </p>
								<p><b>${message:courseEnroledParticipants}:</b> ${CurrentCourse.enroledParticipants}<br /> </p> 
								<label class="checkbox">
		            			<form t:type="form">
									Favorite <t:actionlink t:id="update" context="CurrentCourse.id"><input t:type="checkbox" value="${prop:CurrentCourse.isFavorite}"/></t:actionlink>
								</form>
								</label>
								<br />
								<t:pagelink page="data/visualization" context="${CurrentCourse.id}" class="btn btn-primary pull-left">${message:viewdetails}</t:pagelink>
								
							</section>	
							</t:zone> <!-- courseZone  -->
						</div> <!-- span5 -->
						
						<div class="span6">
							<t:zone t:id="courseVisZone" id="courseVisZone" t:update="show"> 
								<div t:id="chart1" style="width: 450px; height: 250px;"/>
									
								<br /><br />
							</t:zone> <!-- courseVisZone  -->		
						</div> <!-- span6 -->
						
					</div>
					</div><!-- tab-pane summary -->
				    
				    <div class="tab-pane" id="lastmonth">
						<div class="row-fluid">
						<div class="span1" />
							
						<div class="span5">
							<t:zone t:id="courseLastMonthZone" id="courseLastMonthZone" t:update="show"> 	
							<section>
								<header>
									<h3>${CurrentCourse.courseDescription} (${CurrentCourse.courseId})</h3><br />
								</header>
								<p><b>${message:lastRequest}:</b> ${getLocalizedDateTime(CurrentCourse.lastRequestDate)} <br /> </p>
		    					<br />
		    					<p><b>${message:overallRequests}: </b> ${getOverallRequest(usageAnalysis)}<br /> </p> 
		    					<br />
		    					<p><b>${message:avgRequests}:</b> ${getAverageRequest(usageAnalysis)}<br /> </p> 
		    					<br />
		    					<p><b>${message:mostRequests}:</b> ${getLocalizedDate(getMaxRequestDate(usageAnalysis))}  - (${getMaxRequest(usageAnalysis)})<br /> </p> 	
		    					<br />

								<label class="checkbox">
								</label>
								<br />
							</section>	
							</t:zone> <!-- courseLastMonthZone  -->
						</div> <!-- span5 -->
						
						<div class="span5">
							<t:zone t:id="courseVisLastMonthZone" id="courseVisLastMonthZone" t:update="show"> 
<!--								<div t:id="chart2" style="width: auto; height: 300px;"/>-->
							</t:zone> <!-- courseVisZone  -->		
						</div> <!-- span5 -->
						
					</div><!-- tab-pane  last month -->
					
					</div>
				    <div class="tab-pane" id="overall">...</div>
				    <div class="tab-pane" id="settings">...</div>
				</div> <!-- tab-content -->
				
    		</div> <!-- class=well -->
    		</div> <!-- thumbnail -->
    		
    		<div class="row-fluid">
    			<div class="thumbnail">
    				<div class="row-fluid">
    					<div class="span1">
	    				</div>
	    				<div class="span11">
	    					<br />
	    					<b>${message:chooseAnalysisType}</b>
    						<br />
    						<br />
	    				</div>
    					
    				</div>
    				<t:zone t:id="analysisSelectZone" id="analysisSelectZone" t:update="show"> 
							
		    			<div class="row-fluid">
		    				
		    				<div class="span1">
		    				</div>
			    			<div class="span1" align="center">
			    				<t:pagelink page="data/visualization" context="${CurrentCourse.id}"><img src="${usageAnalysisIcon}" height="50px" width="75px" /><br /><br /><b>${message:usageAnalysis}</b> </t:pagelink> 
			    				<br /><br />
			    			</div>
			    			<div class="span2" align="center">
			    				<t:pagelink page="data/visualizationD3" context="${CurrentCourse.id}"><img src="${pathAnalysisIcon}" height="50px" width="85px" /><br /><br /><b>${message:pathAnalysis}</b> </t:pagelink>
			    				<br /><br />
			    			</div>
			    			<div class="span1">
			    			</div>
			    			<div class="span5">
			    			</div>
			    		</div>
		    		</t:zone> <!-- analysisSelectZone  -->		
    			</div>
    		</div>
    	</div> <!-- span9 -->
    	
    	
    </div>

<!--    <script type="text/javascript">-->
<!--				    jQuery(document).ready(function ($) {-->
<!--				        $(".tabs").tabs();-->
<!--				    });-->
<!--    				$('#summary').tab('show')-->
<!--    				-->
<!--				    $(function () {-->
<!--				    $('.tabs a:last').tab('show')-->
<!--				    })-->
<!--				    -->
<!--				    $('a[data-toggle="tab"]').on('shown', function (e) {-->
<!--    					e.target // activated tab-->
<!--    					e.relatedTarget // previous tab-->
<!--    				})-->
<!--				</script>-->
    
</html>


